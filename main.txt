#include "iostream"
#include "fstream"
#include "stdio.h"
#include "stdlib.h"
#include "iomanip"
#include "conio.h"

using namespace std;

int count_searcher();
void massiv_a(int* a, int n);
void output(int* a, int n);
void reversed_sort_C_lekktion(int* a, int n);
void input_massiv_b(int* b, int k);
int massiv_clearing(int* b, int k, int x, int y);

int main()
{
	setlocale(LC_ALL, "Russian");
	printf("-----Вариант №1-----\n\n");
	printf("Задание №1\n\n");

	int n = count_searcher(); // Поиск кол-ва подходящих эл-тов для создания массива

	printf("Кол-во четн. эл-тов: %d\n\n", n);
	
	int* a;
	a = new int[n];

	massiv_a(a, n); //заполнение массива подходящими эл-тами

	printf("Массив а:\n");
	printf("(Для продолжения нажмите любую клавишу...)\n\n");
	_getch(); // пауза

	reversed_sort_C_lekktion(a, n); // сортирует эл-ты массива в порядке убывания

	output(a, n); // вывовд отсортированного массива

	// задание 2
	printf("\n\n");
	printf("Задание №2\n\n");

	int* b;
	int k = 1000;
	b = new int[k];

	input_massiv_b(b, k);

	printf("Массив b:\n");
	printf("(Для продолжения нажмите любую клавишу...)\n\n");
	_getch();
	
	output(b, k);

	int x = -1, y = n + 1;
	while ((x < 0) || (y > k) || (y < x))
	{
		printf("\nВведите границы отрезка : ");
		cin >> x; cin >> y;
	}

	int count = massiv_clearing(b,k, x, y); // кол-во перенесенных в конец нулей
	k = k - count; // кол-во эл-тов в полученном массиве

	int* c;
	c = new int[k];
	for (int i = 0; i <= k; i++)
	{
		c[i] = b[i];
	}

	printf("\nМассив без нулей, которые (возможно) были в интервале :\n");
	printf("(Для продолжения нажмите любую клавишу...)\n\n");
	_getch();

	output(c, k);

	return 0;
}

void output(int* a, int n) // вывод
{
	for (int i = 0; i < n; i++)
		cout << setw(2) << a[i] << "  ";
	cout << endl;
}

int count_searcher() // считает, кол-во четных эл-тов
{
	ifstream massiv;
	int count = 0, c;
	//massiv.open("D:\\Work\\FIT-194\\Lab1\\massiv.txt", ios::in);			// Комп. ВУЗа
	massiv.open("C:\\Users\\Makc\\Desktop\\Lab1\\massiv.txt", ios::in);	// Осн. Комп
	//massiv.open("C:\\Users\\user\\Desktop\\Lab1\\massiv.txt", ios::in);	// Ноут
	while (!massiv.eof())
	{
		massiv >> c;
		if (c % 2 == 0)
			count++;
	}
	massiv.close();
	return count;
}

void massiv_a(int* a, int n) // заполняет массив а
{
	int c, i = 0;

	ifstream massiv;

	//massiv.open("D:\\Work\\FIT-194\\Lab1\\massiv.txt", ios::in);	// Комп. ВУЗа
	massiv.open("C:\\Users\\Makc\\Desktop\\Lab1\\massiv.txt", ios::in); // Осн. Комп
	//massiv.open("C:\\Users\\user\\Desktop\\Lab1\\massiv.txt", ios::in);	// Ноут
	while (!massiv.eof())
	{
		massiv >> c;
		if (c % 2 == 0)
		{
			a[i] = c;
			i++;
		}
	}
	massiv.close();
}

void reversed_sort_C_lekktion(int* a, int n) // Обратная ортировка выбором (зачем я ее сделал?), сортирует в порядке убывания
{
	int i, j, k, x;
	for (i = n - 1; i > 0; i--)
	{
		k = i;
		x = a[i];
		for (j = i - 1; j >= 0; j--)
		{
			if (a[j] < x)
			{
				k = j;
				x = a[k];
			}
		}
		a[k] = a[i];
		a[i] = x;
	}
}

void input_massiv_b(int* b, int k) // ввод массива b
{
	for (int i = 0; i < k; i++)
	{
		b[i] = rand() % 5 - 4; //для задания требуется большое кол-во нулей
	}
}

int massiv_clearing(int* b, int k, int x, int y) // перетаскивает нулевые эл-ты, попадающие в интрвал, в конец массива
{
	int g = y, count = 0, z;
	for (int i = x; i <= y; i++)
	{
		if (b[i] == 0)
		{
			z = b[i];
			for (int j = i; j < k; j++)
			{
				b[j] = b[j + 1];
			}
			b[k] = z;
			/*
			for (int i = x; i <= g; i++)			// проверка работы программы
				cout << setw(2) << b[i] << "  ";
			cout << endl;
			printf("\n");
			*/
			i--;
			k--;
			count++;
		}
	}
	return count;
}